{{ 'review-section.css' | asset_url | stylesheet_tag }}

{% comment %} defining constants  {% endcomment %}
<script>
  const starColor = '{{ block.settings.colour }}';
  const shopId = '{{ shop.permanent_domain }}';
  const backendApi = 'https://choir-livestock-mouth-nudist.trycloudflare.com';
</script>

{% render 'review-form' %}
<div class="review-section-container">
  <h1>Customer Reviews</h1>
  <div class="review-section-app">
    <div>
      {% render 'review-section-summary' %}
      {% render 'review-section-ratings' %}
    </div>
    {% render 'review-section-sliders' %}
  </div>

  <div><button class="open-review-form-btn">Write a Review</button></div>
  <div><button class="open-review-list-btn">See Review Summary</button></div>
</div>

<script>
  {% comment %} scripts to open and close the form modal {% endcomment %}
  const modal = document.querySelector(".review-form-container");
  document
  .querySelector(".open-review-form-btn")
  .addEventListener("click", () => {
    modal.style.display = "block";
  });

  document
    .querySelector(".review-form-close img")
    .addEventListener("click", () => {
      modal.style.display = "none";
    });

  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = 'none';
    }
  }

  {% comment %} fetch review summary here {% endcomment %}
</script>

{% schema %}
{
  "name": "Review Section",
  "target": "section",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Product",
      "autofill": true
    },
    {
      "type": "color",
      "id": "colour",
      "label": "Star Colour",
      "default": "#FFD700"
    }
  ]
}
{% endschema %}
